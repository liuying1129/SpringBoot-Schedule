<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<!-- Edge 模式通知 Windows Internet Explorer 以最高级别的可用模式显示内容 -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	
	<title>定时任务监控</title>
    	
    <link href="../../static/dev-css/dashboard.css" rel="stylesheet">
    
	<script src="../../static/dev-js/index.js"></script>

</head>
<body>           	
		<div class="table-responsive">    
            <table class="table table-striped table-bordered">
              <caption><em><b>运行中JOB列表</b></em></caption>
              <thead>               
                <tr>
                  <th>Job名称</th>
                  <th>任务编号(JobKey)</th>
                  <th>TaskContentCode</th>
                  <th>任务描述</th>
                  <th>Trigger状态</th>
                  <th>Cron</th>
                  <th>上次执行时间</th>
                  <th>下次执行时间</th>
                  <th>实际执行时间</th>
                  <th>运行时长(秒)</th>
                  <!-- <th>DatasourceCode</th> -->
                  <!-- <th>jobDataMapJson</th> -->
                </tr>
              </thead>
              <tbody>
				<c:forEach items="${RunJobList}" var="D">
					<tr>
						<td>${D.jobName}</td>
						<td>${D.jobDataMapTaskConfigCode}</td>
						<td>${D.jobDataMapTaskContentCode}</td>
						<td>${D.jobDataMapTaskDesc}</td>
						<td>${D.jobTriggerState}</td>
						<td>${D.jobTriggerCron}</td>
						<td>${D.triggerPreviousFireTime}</td>
						<td>${D.triggerNextFireTime}</td>
						<td>${D.executingJobFireTime}</td>
						<td>${D.executingJobRunTime}</td>
						<%-- <td>${D.jobDataMapDatasource}</td> --%>
						<%-- <td>${D.jobDataMapJson}</td> --%>
					</tr>
				</c:forEach> 
              </tbody>
            </table> 
		</div>              
            
		<div class="table-responsive">
			<table class="table table-bordered">
			  <caption><em><b>状态说明</b></em></caption>
              <thead>
                <tr>
                  <th>None</th>
                  <th>NORMAL</th>
                  <th>PAUSED</th>
                  <th>COMPLETE</th>
                  <th>BLOCKED</th>
                  <th>ERROR</th>
                </tr>
              </thead>
              <tbody>
					<tr>
						<td>已经完成，且不会再执行，或者找不到该触发器</td>
						<td>正常状态</td>
						<td>暂停状态</td>
						<td>触发器完成，但是任务可能还正在执行中</td>
						<td>线程阻塞状态</td>
						<td>出现错误</td>
					</tr>
              </tbody>
			</table>                    
		</div>              
			       
		<div class="table-responsive"> 
            <table class="table table-striped table-bordered">
              <caption><em><b>JOB列表</b></em></caption>
              <thead>
                <tr>
                  <th>序号</th>
                  <th>Job名称</th>
                  <th>任务编号(JobKey)</th>
                  <th>TaskContentCode</th>
                  <th>Trigger状态</th>
                  <th>Cron</th>
                  <th>上次执行时间</th>
                  <th>下次执行时间</th>
                  <th>Trigger</th>
                  <th>触发器启动时间</th>
                </tr>
              </thead>
              <tbody>
				<c:forEach items="${AllJobList}" var="D" varStatus="status">
					<tr>
						<td>${status.index+1}</td>
						<td>${D.jobName}</td>
						<td>${D.jobDataMapTaskConfigCode}</td>
						<td>${D.jobDataMapTaskContentCode}</td>
						<td>${D.jobTriggerState}</td>
						<td>${D.jobTriggerCron}</td>
						<td>${D.triggerPreviousFireTime}</td>
						<td>${D.triggerNextFireTime}</td>
						<td>${D.jobTrigger}</td>
						<td>${D.triggerStartTime}</td>
					</tr>
				</c:forEach> 
              </tbody>
            </table>    
		</div>              
</body>
</html>